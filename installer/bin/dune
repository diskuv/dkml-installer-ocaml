(rule
 (targets
  discover.ml
  create_installers.ml
  runner_user.ml
  runner_admin.ml
  package_setup.ml
  package_uninstaller.ml)
 (action
  (progn
   ; in real code: (run ml-of-installer-generator)
   (run ../../dunify/ml-generator/main.exe))))

(rule
 (target dune.inc)
 (deps
  discover.ml
  create_installers.ml
  runner_user.ml
  runner_admin.ml
  package_setup.ml
  package_uninstaller.ml)
 (mode promote)
 (action
  (progn
   ; in real code: (run dune-of-installer-generator)
   (run
    ../../dunify/dune-generator/main.exe
    --project-root
    %{project_root}
    %{target}))))

(include dune.inc)
